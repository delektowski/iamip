(this.webpackJsonpiamip=this.webpackJsonpiamip||[]).push([[0],{51:function(e,t,n){e.exports=n(63)},56:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),c=n.n(o),i=(n(56),n(41)),s=n(42),u=n(44),m=n(47),l=n(45),p=n(82),d=n(13),f=n(16),b=n(86),E=n(85),O=n(87),g=n(84),v=Object(p.a)({postContainer:{background:"whitesmoke",minHeight:"12rem",width:"20rem",padding:"2rem",margin:"2rem 0",display:"flex",flexDirection:"column",alignItems:"space-between",justifyContent:"space-between"},buttonComments:{marginTop:"1rem"}}),y=function(e){var t=e.getComments,n=e.postComments,a=e.setIsShowComments,o=e.isShowComments,c=v(),i=function(e){n||t(),a(e)};return r.a.createElement(r.a.Fragment,null,o&&n?r.a.createElement(g.a,{className:c.buttonComments,variant:"contained",color:"secondary",onClick:function(){return i(!1)}},r.a.createElement(E.a,{variant:"button"},"ukryj komentarze")):r.a.createElement(g.a,{className:c.buttonComments,variant:"contained",color:"primary",onClick:function(){return i(!0)}},r.a.createElement(E.a,{variant:"button"},"poka\u017c komentarze")))},C=n(34),j=n(35),h=function(e,t){var n,a,r=t[0].postId,o=Object(j.a)(e),c=Object(C.a)(o);try{for(c.s();!(a=c.n()).done;){var i=a.value;if(i.getIn(["id"])===r)if("break"===function(){var e=i.set("comments",t);return n=o.update(S(o,"id",r),(function(){return e})).toJS(),"break"}())break}}catch(s){c.e(s)}finally{c.f()}return n},S=function(e,t,n){return e.findIndex((function(e){return e.getIn([t])===n}))},_=function(e){return fetch(e).then((function(e){return e.json()})).then((function(e){return e}))},w=Object(d.b)((function(e){return{posts:e.posts}}),(function(e){return{onAddComment:function(t){return e(function(e){return{type:"ON_ADD_POST_COMMENT",payload:e}}(t))}}}))((function(e){var t=e.posts,n=e.postId,o=e.onAddComment,c=e.postComments,i=Object(a.useState)(""),s=Object(f.a)(i,2),u=s[0],m=s[1],l=Object(a.useState)(""),p=Object(f.a)(l,2),d=p[0],b=p[1],O=Object(a.useState)(""),g=Object(f.a)(O,2),v=g[0],y=g[1],h=Object(a.useState)(!1),_=Object(f.a)(h,2),w=_[0],x=_[1],T=function(e){var t=e.target;"name"===t.name&&m(t.value),"email"===t.name&&b(t.value),"body"===t.name&&y(t.value)},N=function(e){o(function(e,t,n){var a,r,o=Object(j.a)(e),c=Object(C.a)(o);try{for(c.s();!(r=c.n()).done;){var i=r.value;if(i.getIn(["id"])===t)if("break"===function(){var e=i.getIn(["comments"]).push(n),r=i.set("comments",e);return a=o.update(S(o,"id",t),(function(){return r})).toJS(),"break"}())break}}catch(s){c.e(s)}finally{c.f()}return a}(t,n,e))},k=Object(a.useCallback)((function(){var e=/user/;return c.filter((function(t){return e.test(t.id)})).length>0}),[c]);return Object(a.useEffect)((function(){x(k())}),[c,k]),r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target;N(function(e){return{postId:n,id:"".concat((new Date).getTime(),"user"),name:e.name.value,email:e.email.value,body:e.body.value}}(t)),m(""),b(""),y("")}},r.a.createElement("label",null,"name:",r.a.createElement("input",{disabled:w,name:"name",type:"text",value:u,onChange:T,required:!0})),r.a.createElement("br",null),r.a.createElement("label",null,"email:",r.a.createElement("input",{disabled:w,name:"email",type:"email",value:d,onChange:T})),r.a.createElement("br",null),r.a.createElement("label",null,"body:",r.a.createElement("textarea",{disabled:w,name:"body",value:v,onChange:T,required:!0})),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Dodaj komentarz"),w&&r.a.createElement(E.a,{variant:"overline",component:"p",color:"secondary"},"You can add only 1 comment.")))})),x=Object(p.a)({commentContainer:{boxSizing:"border-box",width:"100%",boxShadow:"2px 2px 12px rgba(128, 128, 128, 0.37) inset",borderRadius:"6px",padding:".6rem",margin:"1rem auto"}}),T=function(e){var t=e.commentId,n=e.commentName,a=e.commentEmail,o=e.commentBody,c=e.posts,i=e.onDeleteComment,s=e.postId,u=x();return r.a.createElement("section",{key:t,className:u.commentContainer},r.a.createElement("button",{onClick:function(){i(function(e,t,n){var a,r,o=Object(j.a)(e),c=Object(C.a)(o);try{for(c.s();!(r=c.n()).done;){var i=r.value;if(i.getIn(["id"])===t)if("break"===function(){var e=i.getIn(["comments"]),r=S(e,"id",n),c=e.delete(r),s=i.set("comments",c);return a=o.update(S(o,"id",t),(function(){return s})).toJS(),"break"}())break}}catch(s){c.e(s)}finally{c.f()}return a}(c,s,t))}},"Usu\u0144"),r.a.createElement("p",null,"NAME: ",n),r.a.createElement("p",null,"EMAIL: ",a),r.a.createElement(E.a,{variant:"body2",component:"p"},"COMMENT: ",o))},N=Object(p.a)({commentsContainer:{width:"100%",margin:"0 auto",display:"flex",flexDirection:"column"},commentContainer:{boxSizing:"border-box",width:"100%",boxShadow:"2px 2px 12px rgba(128, 128, 128, 0.37) inset",borderRadius:"6px",padding:".6rem",margin:"1rem auto"}}),k=Object(d.b)((function(e){return{posts:e.posts}}),(function(e){return{onGetComments:function(t){return e(function(e){return{type:"ON_REQUEST_POST_COMMENTS",payload:e}}(t))},onDeleteComment:function(t){return e(function(e){return{type:"ON_DELETE_COMMENT",payload:e}}(t))}}}))((function(e){var t=e.postComments,n=e.postId,o=e.onGetComments,c=e.setIsProgressSpinner,i=e.posts,s=e.onDeleteComment,u=N(),m=Object(a.useState)(!1),l=Object(f.a)(m,2),p=l[0],d=l[1],b=function(){return t&&p};return r.a.createElement("div",{className:u.commentsContainer},r.a.createElement(y,{postComments:t,getComments:function(){c(!0),o(n)},setIsShowComments:d,isShowComments:p}),b()&&t.map((function(e){return r.a.createElement(T,{key:e.id,commentId:e.id,commentName:e.name,commentEmail:e.email,commentBody:e.body,posts:i,postId:n,onDeleteComment:s})})),b()&&r.a.createElement(w,{postId:n,postComments:t}))})),I=Object(p.a)({postContainer:{background:"whitesmoke",minHeight:"20rem",width:"20rem",padding:"2rem",margin:"2rem 0",display:"flex",flexDirection:"column",alignItems:"space-between",justifyContent:"space-between"},progressSpinnerContainer:{display:"flex",justifyContent:"center",paddingTop:"1rem"},buttonComments:{marginTop:"1rem"}}),M=Object(d.b)((function(e){return{posts:e.posts}}),null)((function(e){var t=e.postId,n=e.postTitle,o=e.postBody,c=e.postComments,i=I(),s=Object(a.useState)(!1),u=Object(f.a)(s,2),m=u[0],l=u[1];return Object(a.useEffect)((function(){c&&l(!1)}),[c]),r.a.createElement("section",{key:t},r.a.createElement(b.a,{elevation:1,className:i.postContainer},r.a.createElement(E.a,{variant:"overline",component:"p"},r.a.createElement("strong",null,t)),r.a.createElement(E.a,{variant:"overline",component:"h2"},r.a.createElement("strong",null,"title:")," ",n),r.a.createElement(E.a,{variant:"body2",component:"p"},r.a.createElement(E.a,{variant:"overline"},r.a.createElement("strong",null,"Body:"))," ",o),r.a.createElement(k,{postComments:c,postId:t,setIsProgressSpinner:l}),r.a.createElement("div",{className:i.progressSpinnerContainer},m&&r.a.createElement(O.a,null))))})),A=n(88),P=Object(d.b)((function(e){return{page:e.page,pagesAmount:e.pagesAmount}}),(function(e){return{onSetPage:function(t){return e(function(e){return{type:"ON_SET_PAGE",payload:e}}(t))}}}))((function(e){var t=e.onSetPage,n=e.pagesAmount;return r.a.createElement("div",null,r.a.createElement(A.a,{count:n,color:"primary",onChange:function(e,n){return t(n)}}))})),D=Object(p.a)({postsContainer:{margin:"4rem auto",width:"98vw",background:"white",display:"flex",flexDirection:"columns",flexWrap:"wrap",justifyContent:"space-around"},paginationContainer:{position:"fixed",top:"0",display:"flex",justifyContent:"center",background:"white",width:"100%",margin:"0 auto",padding:"1rem 0",zIndex:100}}),G=Object(d.b)((function(e){return{posts:e.posts,pagesAmount:e.pagesAmount,page:e.page}}),(function(e){return{onGetPosts:function(){return e({type:"ON_REQUEST_POSTS"})},onSetPagesAmount:function(t){return e(function(e){return{type:"ON_SET_PAGES_AMOUNT",payload:e}}(t))}}}))((function(e){var t=e.posts,n=e.onGetPosts,o=e.onSetPagesAmount,c=e.pagesAmount,i=e.page,s=D();Object(a.useEffect)((function(){n()}),[n]),Object(a.useEffect)((function(){o(function(e){return Math.ceil(e.length/10)}(t))}),[t,o]);var u=function(){return t.reduce((function(e,t){return function(e,t,n){var a=parseInt(e),r=t*n;return a<=r&&a>r-n}(t.id,i,c)?[].concat(Object(l.a)(e),[t]):e}),[])};return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:s.paginationContainer},r.a.createElement(P,{pagesAmount:c})),r.a.createElement("main",{className:s.postsContainer},u().map((function(e){return r.a.createElement(M,{key:e.id,postId:e.id,postTitle:e.title,postBody:e.body,postComments:e.comments})}))))})),U=function(e){Object(m.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(G,null))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=n(19),F=n(20),R={posts:[],pagesAmount:0,page:1},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ON_FETCH_POSTS":case"ON_FETCH_POST_COMMENTS":case"ON_ADD_POST_COMMENT":return Object(F.a)({},e,{posts:t.payload});case"ON_SET_PAGES_AMOUNT":return Object(F.a)({},e,{pagesAmount:t.payload});case"ON_SET_PAGE":return Object(F.a)({},e,{page:t.payload});case"ON_DELETE_COMMENT":return Object(F.a)({},e,{posts:t.payload});default:return e}},H=n(46),J=n(15),L=n.n(J),Q=n(17),W=L.a.mark(q);function q(){var e;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://jsonplaceholder.typicode.com/posts",t.next=3,_("https://jsonplaceholder.typicode.com/posts");case 3:return e=t.sent,t.next=6,Object(Q.b)({type:"ON_FETCH_POSTS",payload:e});case 6:case"end":return t.stop()}}),W)}var X=function(e){return e.posts},V=L.a.mark(Y);function Y(e){var t,n,a,r;return L.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,o.next=3,Object(Q.c)(X);case 3:return n=o.sent,a="https://jsonplaceholder.typicode.com/comments?postId=".concat(t),o.next=7,_(a);case 7:return r=o.sent,o.next=10,Object(Q.b)({type:"ON_FETCH_POST_COMMENTS",payload:h(n,r)});case 10:case"end":return o.stop()}}),V)}var $=L.a.mark(Z),K=L.a.mark(ee);function Z(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.e)("ON_REQUEST_POSTS",q);case 2:return e.next=4,Object(Q.d)("ON_REQUEST_POST_COMMENTS",Y);case 4:case"end":return e.stop()}}),$)}function ee(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.a)([Z()]);case 2:case"end":return e.stop()}}),K)}var te=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||B.c,ne=Object(H.a)(),ae=Object(B.d)(z,te(Object(B.a)(ne)));ne.run(ee),c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(d.a,{store:ae},r.a.createElement(U,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[51,1,2]]]);
//# sourceMappingURL=main.abbed4f4.chunk.js.map